#!/bin/bash

DEFAULT_LOG_LEVEL=info
DEFAULT_IP=0.0.0.0
DEFAULT_PORT=8000
DEFAULT_GUNICORN_WORKERS_COUNT=10

LOOM_LOG_LEVEL=${LOOM_LOG_LEVEL:-$DEFAULT_LOG_LEVEL}
LOOM_SERVER_INTERNAL_IP=${LOOM_SERVER_INTERNAL_IP:-$DEFAULT_IP}
LOOM_SERVER_INTERNAL_PORT=${LOOM_SERVER_INTERNAL_PORT:-$DEFAULT_PORT}
LOOM_SERVER_GUNICORN_WORKERS_COUNT=${LOOM_SERVER_GUNICORN_WORKERS_COUNT:-$DEFAULT_GUNICORN_WORKERS_COUNT}

gunicorn loomengine_server.core.wsgi --bind ${LOOM_SERVER_INTERNAL_IP}:${LOOM_SERVER_INTERNAL_PORT} --log-level ${LOOM_LOG_LEVEL} --capture-output -w ${LOOM_SERVER_GUNICORN_WORKERS_COUNT} --timeout 300
