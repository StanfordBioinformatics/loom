<img src="assets/loading.gif" alt="Loading..." ng-show="loading" class="center-block">
<div ng-hide="loading">
    <div class="table-responsive" >
        <table class="table table-striped table-hover" ng-show="runs.length">
            <thead>
                <tr>
                    <th>Run</th>
                    <th>Status</th>
                    <th>Started</th>
                </tr>
            </thead>
            <tbody ng-repeat="run in runs">
                <tr>
                    <td>
                        <a ng-href="#/runs/{{run.uuid}}">
                            {{run.template.name}}@{{run.uuid | limitTo: 8}}
                        </a>
                    </td>
                    <td>
                        {{run.status}}
                    </td>
                    <td>
                        {{run.datetime_created | date:'medium'}}
                    </td>
                </tr>
                <tr ng-repeat-start="step in run.steps">
                    <td class="step-indent">
                        <a ng-href="#/runs/{{step.uuid}}">
                            {{step.template.name}}@{{step.uuid | limitTo: 8}}
                        </a>
                    </td>
                    <td>
                        {{step.status}}
                    </td>
                    <td>
                        {{step.datetime_created | date:'medium'}}
                    </td>
                </tr>
                <tr ng-repeat-start="task in step.tasks">
                    <td class="task-indent">
                        Task
                        <a ng-href="api/tasks/{{task.uuid}}">
                            {{task.uuid}}
                        </a>
                    </td>
                    <td>
                        {{task.status}}
                    </td>
                    <td>
                        {{task.datetime_created | date:'medium'}}
                    </td>
                </tr>
                <tr ng-repeat-start="task_attempt in task.task_attempts">
                    <td class="task-attempt-indent">
                        Attempt
                        <a ng-href="api/task-attempts/{{task_attempt.uuid}}">
                            {{task_attempt.uuid}}
                        </a>
                        (<a target="_blank" ng-href="http://{{$location.host()}}:5601/app/kibana#/discover?_g=(refreshInterval:(display:'5%20seconds',pause:!f,section:1,value:5000),time:(from:now%2Fy,mode:quick,to:now))&_a=(columns:!(log,container_name),index:'*',interval:auto,query:(query_string:(analyze_wildcard:!t,query:'container_name:{{task_attempt.uuid}}')),sort:!('@timestamp',desc))">
                            logs &nbsp;<span class="glyphicon glyphicon-new-window" aria-hidden="true"></span>
                        </a>)
                    </td>
                    <td>
                        {{task_attempt.status}}
                    </td>
                    <td>
                        {{task_attempt.datetime_created | date:'medium'}}
                    </td>
                </tr>
                <tr ng-repeat-end></tr>
                <tr ng-repeat-end></tr>
                <tr ng-repeat-end ng-hide="true"></tr>
            </tbody>
        </table>
        <div ng-hide="runs.length">no runs</div>
    </div>
</div>
